class Event < ActiveRecord::Base

	EVENT_TYPES = [ "Attendance", "Late", "Phone", "Behaviour", "Suspension" ]

  belongs_to :employee
  belongs_to :user
  
	default_scope -> { order(created_at: :desc) }
  
  validates :employee_id, presence: true
  validates :incident_type, presence: true
  validates :description, presence: true
  
  def self.to_csv(options = {})
		CSV.generate(options) do |csv|
		  csv.add_row column_names
		  all.each do |event|
		    values = event.attributes.values
		    csv.add_row values
		  end
		end
	end
  
end
